<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>登录页面</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<link rel="shortcut icon" href="../assets/pictures/icon.png">
	<link href="../assets/css/competition.css" rel="stylesheet">
</head>

<body>
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3 class="modal-title" id="loginModalLabel" align="center">编程作品设计大赛 · 登录页面</h3>
			</div>
			<br>
			<div class="modal-body">
				<form id="loginform" class="form-horizontal">
					<div class="form-group">
						<label for="account" class="col-sm-3 hidden-xs control-label">队伍 ID </label>
						<div class="col-sm-6 col-xs-10 col-xs-offset-1 col-sm-offset-0">
							<input type="text" name="teamID" class="form-control" id="account" placeholder="请输入队伍 ID " required="">
						</div>
					</div>
					<div class="form-group">
						<label for="passwd" class="col-sm-3 hidden-xs control-label">登录密码</label>
						<div class="col-sm-6 col-xs-10 col-xs-offset-1 col-sm-offset-0">
							<input type="password" name="password" class="form-control" id="passwd" placeholder="请输入登录密码" required="">
						</div>
					</div>
					<div class="form-group">
						<label for="captcha" class="col-sm-3 hidden-xs control-label">验证码</label>
						<div class="col-sm-6 col-xs-10 col-xs-offset-1 col-sm-offset-0">
							<input type="text" name="captcha" class="form-control" id="captcha" placeholder="请输入验证码" required="">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 hidden-xs control-label"></label>
						<div class="col-sm-6 col-xs-10 col-xs-offset-1 col-sm-offset-0">
							<img id="captchaImg" src="../assets/captcha/captcha.php" onclick="freshCaptcha()" alt="验证码">&nbsp;&nbsp;&nbsp;
							<a href="javascript:freshCaptcha()">更换QwQ</a>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 hidden-xs control-label"></label>
						<div class="col-sm-6 col-xs-10 col-xs-offset-1 col-sm-offset-0">
							<span class="tip" id="login-tip"></span>
						</div>
					</div>
					<div class="modal-footer">
						<input class="btn btn-lg btn-info btn-block" value="登录" type="submit"/>  			
						<button class="btn btn-lg btn-success btn-block" onclick="window.location.href='../register'"">我要报名</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<div class="copyright">Copyright © 2017 <a href="https://github.com/KingsleyXie/CompetitionRegistrationSystem">Kingsley</a></div>


	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="../assets/js/competition.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$('#loginform').submit(function(e) {
				e.preventDefault();
				$.ajax({
					type: "POST",
					url: 'login.php',
					data: $(this).serialize(),
					success: function(response)
					{
						if (response.code == 1)
							alert("验证码错误！");
						if (response.code == 2)
							alert("队伍 ID 或登录密码错误！");
						if (response.code == 3)
							alert("不要调皮哦");
						if (response.code == 0) {
							alert("欢迎回来，" + response.teamName);
							window.location.href = "../teams";
						}
					}
				});
			});
		});
	</script>
</body>

</html>

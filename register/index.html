<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>报名页面</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<link href="../assets/css/competition.css" rel="stylesheet">
	<link href="../assets/css/register.css" rel="stylesheet">
	<link rel="shortcut icon" href="../assets/icon.png">
</head>

<body>
	<div class="container">
		<div class="modal-content">

			<div class="formTitlePic">
				<img class="formPic" src="../assets/pictures/formTitlePic.png">
			</div>

			<div class="formTitle">
				<h1>编程作品设计大赛 · 报名表</h1>
			</div>

			<form id="registerform">
				<div class="modal-body">
					<h3> Part 1. 队伍信息 </h3>
					<div class="row">
						<div class="col-md-8">
							<div class="form-group">
								<label>队名</label>
								<input type="text" class="form-control" placeholder="请输入队伍名称" name="teamName" value="" />
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label>参赛类型</label>
								<select id="competitionType" name="competitionType" class="form-control">
									<option value="0"> 请选择队伍参赛类型 </option>
									<option value="1"> 作品赛 </option>
									<option value="2"> 创意赛 </option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label>登录密码</label>
								<input type="password" class="form-control" placeholder="请设置登录密码" name="password" value="" />
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label>确认密码</label>
								<input type="password" class="form-control" placeholder="请再次输入登录密码" name="passwordConfirm" value="" />
							</div>
						</div>
					</div>

					<h3>Part 2. 成员信息</h3>
					<div id="teamLeader">
						<h4>队长</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-control" name="teamLeaderName" value="" />
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<label>年级</label>
									<select id="grade" name="grade" class="form-control">
										<option value="0"></option>
										<option value="2016级"> 2016级 </option>
										<option value="2015级"> 2015级 </option>
										<option value="2014级"> 2014级 </option>
										<option value="2013级"> 2013级 </option>
										<option value="2012级"> 2012级 </option>
									</select>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>学号</label>
									<input type="text" class="form-control"  name="studentNo" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>联系方式</label>
									<input type="text" class="form-control" name="contact" value="" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5">
								<div class="form-group">
									<label>学院</label>
									<input type="text" class="form-control"  name="college" value="" />
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label>专业</label>
									<input type="text" class="form-control"  name="major" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>校区</label>
									<select id="campus" name="campus" class="form-control">
										<option value="0"></option>
										<option value="大学城校区"> 大学城校区 </option>
										<option value="五山校区"> 五山校区 </option>
									</select>
								</div>
							</div>
						</div>
					</div>
					
					<div id="teamMember1">
						<h4>队员 1</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-control" name="teamMemberName1" value="" />
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<label>年级</label>
									<select id="grade1" name="grade1" class="form-control">
										<option value="0"></option>
										<option value="2016级"> 2016级 </option>
										<option value="2015级"> 2015级 </option>
										<option value="2014级"> 2014级 </option>
										<option value="2013级"> 2013级 </option>
										<option value="2012级"> 2012级 </option>
									</select>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>学号</label>
									<input type="text" class="form-control"  name="studentNo1" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>联系方式</label>
									<input type="text" class="form-control" name="contact1" value="" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5">
								<div class="form-group">
									<label>学院</label>
									<input type="text" class="form-control"  name="college1" value="" />
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label>专业</label>
									<input type="text" class="form-control"  name="major1" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>校区</label>
									<select id="campus1" name="campus1" class="form-control">
										<option value="0"></option>
										<option value="大学城校区"> 大学城校区 </option>
										<option value="五山校区"> 五山校区 </option>
									</select>
								</div>
							</div>
						</div>
					</div>
					
					<div id="teamMember2">
						<h4>队员 2</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-control" name="teamMemberName2" value="" />
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<label>年级</label>
									<select id="grade2" name="grade2" class="form-control">
										<option value="0"></option>
										<option value="2016级"> 2016级 </option>
										<option value="2015级"> 2015级 </option>
										<option value="2014级"> 2014级 </option>
										<option value="2013级"> 2013级 </option>
										<option value="2012级"> 2012级 </option>
									</select>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>学号</label>
									<input type="text" class="form-control"  name="studentNo2" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>联系方式</label>
									<input type="text" class="form-control" name="contact2" value="" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5">
								<div class="form-group">
									<label>学院</label>
									<input type="text" class="form-control"  name="college2" value="" />
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label>专业</label>
									<input type="text" class="form-control"  name="major2" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>校区</label>
									<select id="campus2" name="campus2" class="form-control">
										<option value="0"></option>
										<option value="大学城校区"> 大学城校区 </option>
										<option value="五山校区"> 五山校区 </option>
									</select>
								</div>
							</div>
						</div>
					</div>
					
					<div id="teamMember3">
						<h4>队员 3</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-control" name="teamMemberName3" value="" />
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<label>年级</label>
									<select id="grade3" name="grade3" class="form-control">
										<option value="0"></option>
										<option value="2016级"> 2016级 </option>
										<option value="2015级"> 2015级 </option>
										<option value="2014级"> 2014级 </option>
										<option value="2013级"> 2013级 </option>
										<option value="2012级"> 2012级 </option>
									</select>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>学号</label>
									<input type="text" class="form-control"  name="studentNo3" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>联系方式</label>
									<input type="text" class="form-control" name="contact3" value="" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5">
								<div class="form-group">
									<label>学院</label>
									<input type="text" class="form-control"  name="college3" value="" />
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label>专业</label>
									<input type="text" class="form-control"  name="major3" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>校区</label>
									<select id="campus3" name="campus3" class="form-control">
										<option value="0"></option>
										<option value="大学城校区"> 大学城校区 </option>
										<option value="五山校区"> 五山校区 </option>
									</select>
								</div>
							</div>
						</div>
					</div>
					
					<div id="teamMember4">
						<h4>队员 4</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-control" name="teamMemberName4" value="" />
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<label>年级</label>
									<select id="grade4" name="grade4" class="form-control">
										<option value="0"></option>
										<option value="2016级"> 2016级 </option>
										<option value="2015级"> 2015级 </option>
										<option value="2014级"> 2014级 </option>
										<option value="2013级"> 2013级 </option>
										<option value="2012级"> 2012级 </option>
									</select>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>学号</label>
									<input type="text" class="form-control"  name="studentNo4" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>联系方式</label>
									<input type="text" class="form-control" name="contact4" value="" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5">
								<div class="form-group">
									<label>学院</label>
									<input type="text" class="form-control"  name="college4" value="" />
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label>专业</label>
									<input type="text" class="form-control"  name="major4" value="" />
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label>校区</label>
									<select id="campus4" name="campus4" class="form-control">
										<option value="0"></option>
										<option value="大学城校区"> 大学城校区 </option>
										<option value="五山校区"> 五山校区 </option>
									</select>
								</div>
							</div>
						</div>
					</div>

					<input id="addButton" class="btn btn-info" type="button" onclick="addOneMember()" value="增加一名队员"/>


					<div class="row captchaArea">
						<div class="col-md-6">
							<div class="form-group">
								<label>验证码</label>
								<input type="text" name="captcha" class="form-control" id="captcha" placeholder="请输入验证码"/>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<img id="captchaImg" src="../assets/captcha/captcha.php" onclick="freshCaptcha()" alt="验证码">&nbsp;&nbsp;&nbsp;
								<a href="javascript:freshCaptcha()">更换QwQ</a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<input class="btn btn-lg btn-primary btn-block" value="确认报名" type="submit"/> 
				</div>
			</form>

			<div class="formBottomPic">
				<img class="formPic" src="../assets/pictures/formBottomPic.png">
			</div>

		</div>
	</div>



	<div class="copyright">Copyright © 2017 <a href="https://github.com/KingsleyXie/CompetitionRegistrationSystem">Kingsley</a></div>
	


	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="../assets/js/register.js"></script>
	<script src="../assets/js/competition.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$('#registerform').submit(function(e) {
				e.preventDefault();
				if (Checker()) {
					$.ajax({
						type: "POST",
						url: 'register.php',
						data: $(this).serialize(),
						success: function(response)
						{
							if (response.code == 1)
								alert("验证码错误！");
							if (response.code == 2)
								alert("两次输入密码不一致！");
							if (response.code == 3)
								alert("该队名已存在，请更换");
							if (response.code == 4)
								alert("不要调皮哦");
							if (response.code == 5)
								alert("注册失败，请重新报名");
							if (response.code == 0) {
								var competitionName = response.competitionType == 1 ? "作品赛" : "创意赛";
								alert("报名成功！\n\n\n请记住队伍 ID ：" + response.teamID + "\n\n队伍名：" + response.teamName + "\n\n参赛类型 ：" + competitionName);
								freshCaptcha();
								window.location.href = '../teams';
							}
						}
					});
				}
			});
		});
	</script>
</body>
</html>
